# API_документация

## API Документация - Butterboard

**Версия:** 1.2
**Дата последнего обновления:** 2023-10-27
**Автор:** Елена Петрова, Руководитель отдела разработки API, [elena.petrova@butterboard.com]

### Введение

Этот документ предоставляет исчерпывающую информацию о внутреннем API Butterboard, предназначенном для интеграции с нашими собственными платформами и сторонними сервисами. API разработан для обеспечения бесшовного обмена данными и автоматизации ключевых процессов онбординга и адаптации новых сотрудников.  Вся документация соответствует стандартам RESTful API и использует JWT (JSON Web Token) для аутентификации.

**Важно:**  API предназначен исключительно для внутреннего использования.  Любые попытки несанкционированного доступа или использования API для внешних целей строго запрещены и будут преследоваться в соответствии с политикой компании.

**Цель API:**

*   **Автоматизация Onboarding:**  Обновление информации о новых сотрудниках в различных системах (HR, IT, Google Workspace, Slack и т.д.).
*   **Интеграция с системами управления обучением (LMS):**  Создание и управление курсами онбординга на основе данных из Butterboard.
*   **Персонализация опыта:**  Адаптация контента и заданий онбординга на основе роли сотрудника и отдела.
*   **Сбор данных и аналитика:**  Получение данных о прогрессе и вовлеченности новых сотрудников для улучшения процесса онбординга.
*   **Интеграция с CRM:**  Автоматическое добавление новых сотрудников в CRM-систему.

### Процедуры

#### 1. Аутентификация

Для доступа к API необходимо использовать JWT (JSON Web Token).

*   **Получение JWT:** JWT генерируется после успешной аутентификации в системе Butterboard через веб-интерфейс.  Процесс аутентификации описан в разделе "Процедуры для сотрудников" [ссылка на внутреннюю документацию про аутентификацию].
*   **Формат JWT:**  JWT имеет следующий формат: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2UifQ.abcdef1234567890`
*   **Заголовки запросов:** JWT передается в заголовке `Authorization` запроса в формате `Bearer <JWT>`.
    *   **Пример:**
        ```
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2UifQ.abcdef1234567890
        ```

#### 2.  Общие принципы работы с API

*   **Методы HTTP:**  API использует стандартные методы HTTP: GET, POST, PUT, DELETE.
*   **Формат данных:**  Все запросы и ответы используют формат JSON.
*   **Коды состояния HTTP:**  API возвращает стандартные коды состояния HTTP для обозначения успешности или неуспешности операции.
    *   `200 OK`: Успешное выполнение запроса.
    *   `201 Created`:  Успешное создание ресурса.
    *   `204 No Content`: Успешное выполнение запроса, но без возвращаемого тела.
    *   `400 Bad Request`:  Некорректный запрос (например, неверный формат данных).
    *   `401 Unauthorized`:  Неверный или отсутствующий JWT.
    *   `403 Forbidden`:  Отсутствуют права доступа для выполнения запроса.
    *   `404 Not Found`:  Ресурс не найден.
    *   `500 Internal Server Error`:  Ошибка на стороне сервера.

#### 3.  Основные Endpoints

| Endpoint                       | Метод | Описание                                                              | Пример запроса                                          | Пример ответа (успешный)                                                            |
| ------------------------------ | ----- | --------------------------------------------------------------------- | ------------------------------------------------------- | ----------------------------------------------------------------------------------- |
| `/employees/{employee_id}`      | GET   | Получение информации о сотруднике.                                      | `GET /employees/123`                                    | `{ "id": 123, "name": "Иван Иванов", "email": "ivan.ivanov@butterboard.com", ...}` |
| `/employees/{employee_id}`      | PUT   | Обновление информации о сотруднике.                                     | `PUT /employees/123`                                    | `{ "id": 123, "name": "Иван Петров", "email": "ivan.petrov@butterboard.com", ...}` |
| `/employees/{employee_id}/onboarding_status` | GET | Получение статуса онбординга сотрудника.                               | `GET /employees/123/onboarding_status`                 | `{ "status": "completed", "progress": 80, "last_updated": "2023-10-26T10:00:00Z"}` |
| `/employees/{employee_id}/tasks`    | GET   | Получение списка задач для сотрудника.                                   | `GET /employees/123/tasks`                              | `[ { "id": 1, "title": "Настройка доступа к Jira", "due_date": "2023-10-30", ...}, ...]` |
| `/onboarding_courses`           | GET   | Получение списка доступных курсов онбординга.                            | `GET /onboarding_courses`                               | `[ { "id": 1, "title": "Введение в продукт", "description": "...", ...}`         |
| `/employees/{employee_id}/courses` | POST  | Добавление сотрудника в курс онбординга.                               | `POST /employees/123/courses?course_id=1`                | `{ "id": 201}`                                                                     |
| `/employees/{employee_id}/departments` | POST  | Добавление сотрудника в отдел.                                       | `POST /employees/123/departments?department_id=4`      | `{ "id": 201}`                                                                     |
| `/employees/{employee_id}/sync_to_hr` | POST  | Синхронизация данных сотрудника с системой HR.                       | `POST /employees/123/sync_to_hr`                         | `{ "status": "success" }`                                                             |

**Примечание:** `employee_id` - это уникальный идентификатор сотрудника.  `course_id` и `department_id` - это уникальные идентификаторы соответствующих ресурсов.

#### 4.  Пример кода (Python с использованием библиотеки `requests`)

```python
import requests
import json

# Замените на ваш JWT
JWT = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2UifQ.abcdef1234567890"

url = "https://api.butterboard.com/employees/123"
headers = {
    "Authorization": f"Bearer {JWT}",
    "Content-Type": "application/json"
}

response = requests.get(url, headers=headers)

if response.status_code == 200:
    data = response.json()
    print(json.dumps(data, indent=4))
else:
    print(f"Ошибка: {response.status_code} - {response.text}")
```

### Контакты

*   **Отдел разработки API:** [api-support@butterboard.com](mailto:api-support@butterboard.com)
*   **Елена Петрова (Руководитель):** [elena.petrova@butterboard.com](mailto:elena.petrova@butterboard.com)
*   **Марк Смирнов (Разработчик):** [mark.smirnov@butterboard.com](mailto:mark.smirnov@butterboard.com)

### FAQ

*   **Как получить JWT?** JWT генерируется после успешной аутентификации в системе Butterboard через веб-интерфейс.  Инструкции доступны в разделе [Процедуры для сотрудников](ссылка на внутреннюю документацию про аутентификацию).
*   **Какие ограничения скорости запросов?**  На данный момент действует ограничение в 100 запросов в минуту на IP-адрес.  Для увеличения лимита необходимо обратиться в отдел разработки API.
*   **Как обрабатывать ошибки?**  Внимательно изучайте коды состояния HTTP и тексты сообщений об ошибках, возвращаемые API.  В случае возникновения проблем обращайтесь в отдел поддержки API ([api-support@butterboard.com](mailto:api-support@butterboard.com)).
*   **Как можно получить более подробную документацию?**  Документация API находится в этой вики.  В ближайшем будущем планируется разработка более интерактивной документации с примерами и инструментами тестирования.
*   **Поддерживаются ли другие методы аутентификации?** В настоящее время поддерживается только JWT.  Другие методы аутентификации рассматриваются в будущем.
*   **Как узнать о новых версиях API?**  Изменения в API будут анонсированы в корпоративном блоге и через внутренние рассылки.  Регулярно проверяйте эти каналы информации.
*   **Как можно получить доступ к тестовой среде API?** Тестовая среда доступна по адресу: `https://test.api.butterboard.com`.  Убедитесь, что вы используете соответствующие учетные данные для доступа.  (Учетные данные доступны по запросу у команды разработки).

---

**Примечание:**  Данный документ является текущей версией API Butterboard.  Butterboard оставляет за собой право вносить изменения в API в любое время без предварительного уведомления.  Пожалуйста, проверяйте актуальность документации перед использованием API.
---

**Туп к тестовой среде API?** Тестовая среда доступна по адресу: `https://test.api.butterboard.com`. Убедитесь, что вы используете соответствующие учетные данные для доступа. (Учетные данные доступны по запросу у команды разработки).

---

**Примечание:** Данный документ является текущей версией API Butterboard. Butterboard оставляет за собой право вносить изменения в API в любое время без предварительного уведомления. Пожалуйста, проверяйте актуальность документации перед использованием API.

**Важные моменты, которые следует учитывать при работе с тестовой средой:**

* **Ограничения данных:** Тестовая среда использует фиктивные данные. Не ожидайте, что данные, полученные через API, будут соответствовать реальным данным пользователей или транзакциям. Данные могут быть сгенерированы случайным образом или содержать упрощенные версии реальных данных.
* **Ограничения функциональности:** Некоторые функции API могут быть отключены или ограничены в тестовой среде. Это делается для предотвращения случайных изменений в реальных данных.  В частности, операции, связанные с оплатой, могут быть заблокированы.
* **Сообщения об ошибках:**  Ошибки, возникающие в тестовой среде, могут быть более общими, чем в рабочей среде.  Не полагайтесь на конкретные сообщения об ошибках для диагностики проблем.
* **Не используйте тестовую среду для продакшена:**  Никогда не используйте тестовую среду для отправки реальных транзакций или доступа к реальным данным.  Это может привести к непредсказуемым последствиям и нарушению работы системы.
* **Документация:**  Эта документация предоставляет информацию о текущей версии API.  Регулярно проверяйте [сайт команды разработки](ссылка на сайт команды разработки) на предмет обновлений и изменений.
* **Контроль версий:**  Данная документация хранится в [репозитории документации](ссылка на репозиторий документации, например, GitHub).  Вы можете найти предыдущие версии и предложения по улучшению.

**Основные конечные точки API (примеры):**

* **`/users`**:  Получение списка пользователей.  (Метод: GET) -  Возвращает список фиктивных пользователей.
* **`/users/{user_id}`**:  Получение информации о конкретном пользователе. (Метод: GET) - Возвращает информацию о фиктивном пользователе.
* **`/products`**:  Получение списка продуктов. (Метод: GET) - Возвращает список фиктивных продуктов.
* **`/orders`**:  Создание нового заказа. (Метод: POST) -  Создает фиктивный заказ.
* **`/orders/{order_id}`**:  Получение информации о конкретном заказе. (Метод: GET) -  Возвращает информацию о фиктивном заказе.

**Обратная связь:**  Если у вас есть предложения по улучшению документации или вы обнаружили какие-либо ошибки, пожалуйста, свяжитесь с командой разработки через [форму обратной связи](ссылка на форму обратной связи).

---

**Примечание:**  Данный документ является текущей версией API Butterboard. Butterboard оставляет за собой право вносить изменения в API в любое время без предварительного уведомления. Пожалуйста, проверяйте актуальность документации перед использованием API.